<app-navbar title="Admin Dashboard"></app-navbar>
<section class="manage-exams">
  <div class="dashboard-header">
    <h2>Manage Tasks</h2>
    <div class="dashboard-btns">
      <button class="add-exam-button" (click)="addTask()">Add Task</button>
      <button class="orders-button" (click)="manageUsers()">Manage Users</button>
    </div>
  </div>

  @if (loading) {
    <p class="loading">Loading tasks...</p>
  } @else {

    <!-- Pending Tasks -->
    <h3>Pending Tasks</h3>
    @if (pendingTasks.length === 0) {
      <p class="no-exam">No pending tasks found.</p>
    } @else {
      <div class="exam-cards">
        <div class="exam-card" *ngFor="let task of pendingTasks">
          <div class="exam-card-content">
            <h3>{{ task.title | titlecase }}</h3>
            <p><strong>Status:</strong> {{ task.status | titlecase }}</p>
            <p><strong>Assigned To:</strong> {{ getAssignedUserName(task.assignedTo) | titlecase }}</p>
          </div>
          <div class="actions">
            <button class="orders-button" (click)="viewTask(task.id)">View</button>
            <button class="action-button" (click)="editTask(task.id)">Edit</button>
            <button class="delete-btn" (click)="deleteTask(task)">Delete</button>
          </div>
        </div>
      </div>
    }

    <!-- In Progress Tasks -->
    <h3>In-Progress Tasks</h3>
    @if (inProgressTasks.length === 0) {
      <p class="no-exam">No in-progress tasks found.</p>
    } @else {
      <div class="exam-cards">
        <div class="exam-card" *ngFor="let task of inProgressTasks">
          <div class="exam-card-content">
            <h3>{{ task.title | titlecase }}</h3>
            <p><strong>Status:</strong> {{ task.status | titlecase }}</p>
            <p><strong>Assigned To:</strong> {{ getAssignedUserName(task.assignedTo) | titlecase}}</p>
          </div>
          <div class="actions">
            <button class="orders-button" (click)="viewTask(task.id)">View</button>
            <button class="action-button" (click)="editTask(task.id)">Edit</button>
            <button class="delete-btn" (click)="deleteTask(task)">Delete</button>
          </div>
        </div>
      </div>
    }

    <!-- Completed Tasks -->
    <h3>Completed Tasks</h3>
    @if (completedTasks.length === 0) {
      <p class="no-exam">No completed tasks found.</p>
    } @else {
      <div class="exam-cards">
        <div class="exam-card" *ngFor="let task of completedTasks">
          <div class="exam-card-content">
            <h3>{{ task.title | titlecase }}</h3>
            <p><strong>Status:</strong> {{ task.status | titlecase }}</p>
            <p><strong>Assigned To:</strong> {{ getAssignedUserName(task.assignedTo) | titlecase}}</p>
          </div>
          <div class="actions">
            <button class="orders-button" (click)="viewTask(task.id)">View</button>
            <button class="action-button" (click)="editTask(task.id)">Edit</button>
            <button class="delete-btn" (click)="deleteTask(task)">Delete</button>
          </div>
        </div>
      </div>
    }

  }
</section>
